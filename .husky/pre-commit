#!/bin/bash

# Save the current state of the staging area
git stash -q --keep-index

# Run the ESLint and Prettier commands with the --fix option against the staged files
npm run lint -- --fix # Replace with your actual linting command
npm run format -- --write # Replace with your actual formatting command

# Check if any changes were made to the staged files
git diff --exit-code --name-only --cached > /dev/null 2>&1

if [ $? -eq 0 ]; then
  # No changes were made to the staged files, restore the original state
  git stash pop -q
else
  # Changes were made to the staged files, update the staged changes
  git add .
fi

exit 0
